<script>
    $('.pagination li a').on('click', function (e) {
        e.preventDefault();
        getMediaList('{{ idUnique }}', $(this).attr('href').replace('/ajax/media-list?page=', ''), $('#media-list-search-{{ idUnique }}').val());
    });

    $('.media-list-item').on('click', function () {
        var isCk = $('#media-list-body').hasClass('popup-body');

        if (isCk == true) {
            var tmpArr = window.location.search.substring(1).split('&'), params = {}, tmp, i;

            for (i = tmpArr.length; i-- > 0;) {
                tmp = tmpArr[i].split('=');
                params[tmp[0]] = tmp[1];
            }

            window.opener.CKEDITOR.tools.callFunction(
                params.CKEditorFuncNum,
                document.location.origin + $(this).find('img').attr('data-original-src')
            );
            window.close();
        } else {
            var id = $(this).attr('data-item');
            var targetId = $(this).closest('.modal').attr('data-target-id');
            $.ajax({
                url: '{{ path('admin_ajax_media_response') }}',
                type: 'POST',
                data: {
                    id: id,
                    targetId: targetId
                },
                complete: function () {
                    $('#mediaList_' + targetId).modal('hide');
                }
            });
        }
    });

    $('.close-modal-{{ idUnique }}').on('click', function (e) {
        e.preventDefault();
        var idModal = $(this).attr('data-target-id');
        $('#mediaList_' + idModal).modal('hide');
    });
</script>