services:
    fos_elastica.pager_provider.prototype.mongodb:
        class: FOS\ElasticaBundle\Doctrine\MongoDBPagerProvider
        abstract: true
        arguments:
            - '@doctrine_mongodb'
            - '@fos_elastica.doctrine.register_listeners'
            - ~ # model
            - [] # options

    fos_elastica.doctrine.register_listeners:
        class: FOS\ElasticaBundle\Doctrine\RegisterListenersService
        arguments:
            - '@event_dispatcher'

    fos_elastica.listener.prototype.mongodb:
        class: FOS\ElasticaBundle\Doctrine\Listener
        abstract: true
        arguments:
            - ~ # object persister
            - '@fos_elastica.indexable'
            - [] # configuration
            - null # logger

    fos_elastica.elastica_to_model_transformer.prototype.mongodb:
        class: FOS\ElasticaBundle\Doctrine\MongoDB\ElasticaToModelTransformer
        abstract: true
        arguments:
            - '@doctrine_mongodb'
            - ~ # model
            - [] # options
        calls:
            - [setPropertyAccessor, ['@fos_elastica.property_accessor']]

    fos_elastica.manager.mongodb:
        class: FOS\ElasticaBundle\Doctrine\RepositoryManager
        arguments:
            - '@doctrine_mongodb'
            - '@fos_elastica.repository_manager'
